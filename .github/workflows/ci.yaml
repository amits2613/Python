name: workflow

on:
  push:
    branches:
      - "master"

jobs:
  job1:
    runs-on: ubuntu-latest
    outputs:
      matrix: ${{ steps.set-matrix.outputs.matrix }}
    steps:
    - id: set-matrix
      run: echo "::set-output name=matrix::{\"include\":[{\"project_is\":\"developent\",\"config\":\"Debug\"},{\"project\":\"bar\",\"config\":\"Release\"}]}"

  variable_export:
    needs: job1
    runs-on: ubuntu-latest
    steps:
      - name: checkout repository
        uses: actions/checkout@v2

      # - name: Load .env file
      #   uses: xom9ikk/dotenv@v1.0.2
      #   with:
      #     path: .github/workflows/
      #     mode: stage
      #   if: github.ref == 'refs/heads/master'

      # - name: Load .env file
      #   uses: xom9ikk/dotenv@v1.0.2
      #   with:
      #     path: .github/workflows/
      #     mode: development
      #   if: github.ref == 'refs/heads/dev' 

      - name: Load .env file
        uses: xom9ikk/dotenv@v1.0.2
        with:
          path: .github/workflows/
          mode: prod

      - name: set variable output
        run: |
            echo ${{ env.environment }}
            echo ${{ env.project_id }}


